<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Logoscope — Distill logs into structured intelligence</title>
    <meta name="description" content="Logoscope compresses millions of log lines into kilobytes of structured, AI-ready intelligence with pattern extraction, temporal analysis, and queryable summaries." />

    <!-- Display + text + mono fonts (polished, readable, variable opsz on headings) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500&family=Fraunces:opsz,wght@9..144,600;9..144,700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">

    <style>
      :root {
        /* Color system: calm dark with electric accents */
        --bg: #0c0d10;
        --surface: #121319;
        --elev: #171924;
        --text: #e9ecf1;
        --muted: #b5bdc9;
        --dim: #8e96a3;
        --line: #242838;
        --accent: #7cf5c6; /* mint */
        --accent-2: #8aa5ff; /* periwinkle */
        --warn: #ffcc66;

        /* Fluid type scale */
        --step--2: clamp(0.78rem, 0.73rem + 0.2vw, 0.84rem);
        --step--1: clamp(0.92rem, 0.87rem + 0.3vw, 1.00rem);
        --step-0: clamp(1.00rem, 0.95rem + 0.4vw, 1.12rem);
        --step-1: clamp(1.25rem, 1.10rem + 0.8vw, 1.60rem);
        --step-2: clamp(1.60rem, 1.35rem + 1.6vw, 2.40rem);
        --step-3: clamp(2.10rem, 1.70rem + 2.5vw, 3.40rem);
        --step-4: clamp(2.80rem, 2.20rem + 3.8vw, 4.80rem);

        --radius: 14px;
        --radius-sm: 8px;
        --shadow-soft: 0 10px 30px rgba(0,0,0,0.35);
        --shadow-hard: 0 12px 40px rgba(0,0,0,0.55);

        --maxw: 72rem;
        --measure: 65ch;
        --grid-gap: clamp(1rem, 1vw, 1.6rem);
        --pad: clamp(1rem, 2vw, 2rem);

        /* Entropy lab dynamics */
        --entropy: 62;   /* 0 structure → 100 chaos (js-updated) */
        --blur: 0rem;    /* js-updated visual fuzz */
        --trk: 0em;      /* js-updated tracking */
        --opsz: 36;      /* js-updated optical size for Fraunces */
      }

      /* Global typography */
      html { color-scheme: dark; }
      body {
        margin: 0;
        background: radial-gradient(1200px 600px at 10% -10%, #141622 20%, transparent 60%),
                    radial-gradient(900px 600px at 120% 10%, #11131a 10%, transparent 60%),
                    var(--bg);
        color: var(--text);
        font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        font-size: var(--step-0);
        line-height: 1.55;
        letter-spacing: 0.01em;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        font-optical-sizing: auto;
      }
      h1, h2, h3 {
        font-family: "Fraunces", ui-serif, Georgia, Cambria, Times, serif;
        font-weight: 700;
        line-height: 1.07;
        letter-spacing: -0.01em;
        text-wrap: balance;
        margin: 0 0 0.6em 0;
      }
      h1 { font-size: var(--step-4); }
      h2 { font-size: var(--step-2); }
      h3 { font-size: var(--step-1); }
      p { max-width: var(--measure); color: var(--muted); }
      strong { color: var(--text); font-weight: 600; }
      small { color: var(--dim); font-size: var(--step--1); }
      a { color: var(--accent); text-decoration: none; }
      a:hover { text-decoration: underline; text-underline-offset: 3px; }
      ::selection { background: color-mix(in oklab, var(--accent) 25%, transparent); color: var(--text); }
      :focus-visible { outline: 2px solid var(--accent-2); outline-offset: 4px; border-radius: 6px; }

      /* Layout */
      .wrap { max-width: var(--maxw); margin: 0 auto; padding: calc(var(--pad) * 1.25) var(--pad); }
      header { display: flex; align-items: center; justify-content: space-between; gap: 1rem; }
      .brand { display: inline-flex; align-items: center; gap: 0.8rem; text-decoration: none; }
      .brand h1 { font-size: clamp(1.4rem, 1.2rem + 1vw, 2rem); margin: 0; }
      .pill { display:inline-flex; align-items:center; gap:.5rem; padding:.45rem .7rem; border-radius:999px; background: linear-gradient(180deg, #161925, #10121a); box-shadow: inset 0 1px 0 rgba(255,255,255,0.04), 0 8px 20px rgba(0,0,0,0.35); border:1px solid var(--line); color: var(--muted); font-size: var(--step--2); }
      .pill .dot { width: 8px; height: 8px; border-radius: 999px; background: radial-gradient(circle at 30% 30%, #b8ffe5, var(--accent)); }

      /* Stage (Entropy → Structure Lab) */
      .stage { position: relative; /* no fixed height: let insights define it */ overflow: clip; background:
        radial-gradient(1400px 700px at -10% -10%, rgba(124,245,198,0.06), transparent 50%),
        radial-gradient(1200px 600px at 110% -20%, rgba(138,165,255,0.08), transparent 55%),
        var(--bg);
      }
      #world { position: fixed; inset: 0; width: 100%; height: 100%; display: block; z-index: 0; pointer-events: none; }
      .stream { position: fixed; inset: 0; width: 100%; height: 100%; padding: clamp(8px,1.2vw,14px); box-sizing: border-box; pointer-events: none; white-space: pre; overflow: hidden; opacity: var(--stream-alpha, .22); color: #d7f1ff; font-family: "IBM Plex Mono", ui-monospace, monospace; font-size: clamp(10px, 1.2vw, 13px); line-height: 1.35; text-shadow: 0 1px 0 rgba(0,0,0,0.6); will-change: filter, opacity; transition: filter 160ms ease, opacity 240ms ease; z-index: 0; }
      .stage-overlay { position: relative; z-index: 1; height: auto; display: grid; grid-template-rows: auto auto; gap: 0; }
      .stage-top { display: grid; grid-template-columns: 1fr; align-content: center; padding: clamp(1rem, 4vw, 3rem); padding-bottom: clamp(0.5rem, 1vw, 1rem); gap: clamp(1rem,2vw,2rem); }
      @media (min-width: 680px) {
        .stage-top { grid-template-columns: minmax(0,1.2fr) minmax(0,1fr); align-items: start; }
        .stage-left { grid-column: 1; }
        .stage-insights { grid-column: 2; }
      }
      .stage-left { display: grid; gap: 1.25rem; align-content: start; }
      .stage-story { padding: clamp(1rem, 4vw, 3rem); padding-top: 0; }
      .brandline { display:flex; align-items:center; gap:.8rem; color: var(--dim); }
      .brandmark { font-family: "Space Grotesk", Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; font-weight: 700; letter-spacing: -0.01em; }
      .brandmark.big { font-size: clamp(1.8rem, 2vw + 1.6rem, 2.8rem); letter-spacing: -0.01em; }

      .titleblock { max-width: min(88rem, 92vw); }
      .xdisplay { font-family: "Fraunces", ui-serif, Georgia, Cambria, Times, serif; font-weight: 700; font-size: clamp(2.6rem, 5vw + 1rem, 7rem); line-height: .96; letter-spacing: var(--trk); filter: blur(var(--blur)); margin: .2em 0 .2em; font-variation-settings: "opsz" var(--opsz); }
      .xdisplay + .lede {
        font-size: clamp(1.22rem, 1.2vw + 1.02rem, 1.75rem);
        max-width: 64ch;
        color: color-mix(in oklab, var(--text) 80%, var(--muted));
        line-height: 1.68;
        text-wrap: pretty;
        letter-spacing: 0.004em;
      }

      .stage-bottom { display:flex; justify-content: space-between; align-items: end; gap: 1rem; padding: clamp(1rem, 4vw, 3rem); }
      .readout { display:flex; gap: .6rem; flex-wrap:wrap; }
      .readout .stat { padding:.6rem .8rem; border:1px solid var(--line); border-radius: 12px; background: linear-gradient(180deg, rgba(255,255,255,0.025), rgba(255,255,255,0.005)); font-variant-numeric: tabular-nums lining-nums; }

      .entropy-control { display:grid; gap:.5rem; align-items:center; width: min(520px, 46vw); }
      .entropy-control label { color: var(--dim); font-size: var(--step--1); }
      .entropy-control input[type="range"] { appearance:none; width:100%; height: 20px; background: transparent; }
      .entropy-control input[type="range"]::-webkit-slider-runnable-track { height: 6px; border-radius: 999px; background:
        linear-gradient(90deg, color-mix(in oklab, #ff9090 70%, #000 0%) 0%, color-mix(in oklab, #8aa5ff 70%, #000 0%) 50%, color-mix(in oklab, #7cf5c6 80%, #000 0%) 100%);
        box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06), 0 8px 24px rgba(0,0,0,0.35);
      }
      .entropy-control input[type="range"]::-webkit-slider-thumb { appearance:none; margin-top: -8px; width: 22px; height: 22px; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #eafff6, var(--accent)); border: 1px solid color-mix(in oklab, var(--accent) 25%, var(--line)); box-shadow: 0 8px 24px rgba(124,245,198,0.25), inset 0 1px 0 rgba(255,255,255,0.4); }
      .entropy-control input[type="range"]::-moz-range-track { height: 6px; border-radius: 999px; background:
        linear-gradient(90deg, color-mix(in oklab, #ff9090 70%, #000 0%) 0%, color-mix(in oklab, #8aa5ff 70%, #000 0%) 50%, color-mix(in oklab, #7cf5c6 80%, #000 0%) 100%);
      }
      .entropy-control input[type="range"]::-moz-range-thumb { width: 22px; height: 22px; border: none; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #eafff6, var(--accent)); box-shadow: 0 8px 24px rgba(124,245,198,0.25), inset 0 1px 0 rgba(255,255,255,0.4); }
      .entropy-control .ticks { display:flex; justify-content: space-between; color: var(--dim); font-size: var(--step--2); }

      /* Global blur linkage: chaos blurs hero + stage content (not the dial) */
      .stage-top .brandline,
      .stage-top .titleblock,
      .stage-top .story,
      .stage-top .cli-quickstart,
      .stage-insights,
      .stage-bottom .readout,
      .hero { filter: blur(var(--blur)); transition: filter 160ms ease; }
      .stream { filter: blur(var(--rev-blur)); transition: filter 160ms ease; }

      .hero-right { display: grid; grid-auto-rows: min-content; gap: .8rem; }
      .hero-right .hero-demo { opacity: var(--demo-alpha, 1); transition: opacity 200ms ease, filter 160ms ease; }

      .stage-insights, .hero-insights { display: grid; grid-template-rows: auto 1fr; gap: .8rem; box-shadow: var(--shadow-hard); min-height: 220px; }
      .hero-insights { padding: clamp(0.6rem, 1.4vw, 1.2rem); }
      .stage-insights { padding: 0; align-self: start; }
      .stage-insights .logbox { font-size: 11.5px; line-height: 1.4; padding: 0.7rem 0.8rem; }
      @media (min-width: 1320px) { .stage-insights .logbox { font-size: 12px; } }
      .stage-insights { /* opacity: var(--insight-alpha, 0); */ transition: opacity 240ms ease; }

      /* Hero split */
      .hero { display: grid; grid-template-columns: 1.1fr 1fr; gap: var(--grid-gap); align-items: stretch; margin-top: 1.2rem; }
      @media (max-width: 980px) { .hero { grid-template-columns: 1fr; } }

      .hero-copy { padding: clamp(1rem, 2vw, 2rem); border: 1px solid var(--line); border-radius: var(--radius); background:
        linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.0)),
        radial-gradient(200% 100% at -10% 0%, rgba(124,245,198,0.04), transparent 38%),
        var(--surface);
        box-shadow: var(--shadow-soft);
        position: relative;
        overflow: clip;
      }

      .lens-scan { position: absolute; inset: -40%; background:
        radial-gradient(200px 200px at var(--x, 20%) var(--y, 20%), color-mix(in oklab, var(--accent) 30%, transparent), transparent 70%),
        radial-gradient(350px 250px at calc(var(--x, 20%) + 10%) calc(var(--y, 20%) - 10%), color-mix(in oklab, var(--accent-2) 16%, transparent), transparent 70%);
        filter: blur(30px) saturate(115%);
        opacity: 0.25;
        pointer-events: none;
        mix-blend-mode: screen;
        animation: float 16s ease-in-out infinite alternate;
      }
      @keyframes float { from { transform: translate3d(-3%,2%,0); } to { transform: translate3d(3%,-4%,0); } }

      .brandmark { font-weight: 700; letter-spacing: -0.02em; display:inline-block; }
      .brandmark .o { position: relative; display:inline-block; padding: 0 .05em; }
      .brandmark .o::after {
        content: ""; position: absolute; inset: 18% 10% 18% 10%; border-radius: 50%;
        background: radial-gradient(circle at 35% 35%, #eafff6 0%, var(--accent) 25%, transparent 55%);
        filter: blur(4px) saturate(130%);
        mix-blend-mode: screen; opacity: .7;
      }

      .hero-copy h1 { margin-top: .25rem; }
      .lede { font-size: var(--step-1); color: var(--muted); margin-top: .8rem; }

      .hero-stats { display:flex; flex-wrap:wrap; gap: .6rem; margin-top: 1.1rem; }
      .stat {
        padding: .6rem .75rem; border-radius: var(--radius-sm);
        background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
        border: 1px solid var(--line);
        font-variant-numeric: tabular-nums lining-nums;
      }

      .cta { display:flex; align-items:center; gap:.7rem; margin-top: 1.2rem; }
      .feat-chips { display:flex; flex-wrap: wrap; gap: .5rem; margin-top: .9rem; }
      .feat-chips .chip { padding: .4rem .6rem; border-radius: 999px; border: 1px solid var(--line); color: var(--muted); font-size: var(--step--2); background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.0)); }
      .eyebrow {
        font-family: "Space Grotesk", Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
        font-size: clamp(1.2rem, 0.9vw + 1rem, 1.9rem);
        text-transform: uppercase;
        letter-spacing: .10em;
        color: color-mix(in oklab, var(--accent-2) 52%, var(--dim));
        margin: 1.6rem 0 .6rem;
        font-weight: 500; /* lighter look */
        line-height: 1.15;
        font-variant-caps: all-small-caps;
      }
      .story { display: grid; grid-template-columns: 1fr 1fr; gap: clamp(2rem, 4vw, 4rem); margin-top: .8rem; max-width: none; }
      @media (max-width: 768px) {
        .story { grid-template-columns: 1fr; gap: 1rem; }
      }
      .story p {
        margin: 0;
        color: color-mix(in oklab, var(--text) 78%, var(--muted));
        line-height: 1.74;
        letter-spacing: 0.0025em;
        hyphens: auto;
        overflow-wrap: anywhere;
        font-size: clamp(1.02rem, 0.35vw + 0.98rem, 1.14rem);
      }
      .story p + p { margin-top: .55rem; }
      .story p + .eyebrow { margin-top: 2rem; }
      .story strong { color: var(--text); font-weight: 600; }

      /* CLI quick start */
      .cli-quickstart { margin-top: 4rem; margin-bottom: 4rem; }
      .cli-card { margin-top: 1.6rem; border: 1px solid var(--line); border-radius: var(--radius-sm); padding: .9rem 1rem; background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)); box-shadow: inset 0 1px 0 rgba(255,255,255,0.04); max-width: 64ch; }
      .cli-card .cli-title { font-size: var(--step--1); color: var(--dim); text-transform: uppercase; letter-spacing: .14em; margin-bottom: .45rem; font-family: "Space Grotesk", Inter, ui-sans-serif, system-ui; }
      .cli { margin: 0; padding: .65rem .75rem; background: #0f1117; border: 1px solid #1a2234; border-radius: 10px; color: #d6efff; white-space: pre; overflow: auto; font-family: "IBM Plex Mono", ui-monospace, monospace; font-size: 12.5px; line-height: 1.55; }
      .cli-quickstart .cli { font-size: 14px; }
      .cli + .cli { margin-top: .55rem; }
      .cli .prompt { color: #7cf5c6; }
      .cli-note { display:block; margin-top: .5rem; color: var(--dim); font-size: var(--step--2); }
      .github-btn { margin-top: .8rem; }

      /* Probe Ecosystem section (adapted from cc-remote) */
      .probe-section { padding: clamp(3rem, 8vw, 8rem) 0; text-align: center; }
      .probe-content { max-width: 68rem; margin: 0 auto; padding: 0 var(--pad); }
      .probe-header { font-size: clamp(2rem, 3.6vw, 2.8rem); font-weight: 700; margin-bottom: clamp(2rem, 5vw, 4rem); letter-spacing: -0.02em; color: var(--text); }
      .probe-gradient { background: linear-gradient(135deg, #8aa5ff 0%, #7cf5c6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
      .probe-card { display:flex; align-items:center; gap: clamp(1.5rem, 4vw, 4rem); text-align:left; padding: 0; justify-content: center; }
      .probe-logo-wrapper { flex-shrink:0; }
      .probe-logo { width: 100px; height: auto; opacity: 0.9; object-fit: contain; filter: drop-shadow(0 6px 18px rgba(0,0,0,0.25)); }
      .probe-info { flex: 1; max-width: 46rem; }
      .probe-info h3 { font-size: clamp(1.4rem, 1.2vw + 1rem, 1.8rem); margin-bottom: 1rem; letter-spacing: -0.02em; font-weight: 600; color: var(--text); }
      .probe-info-row { display:block; }
      .probe-info p { color: var(--muted); line-height: 1.7; margin: 0 0 .6rem 0; font-size: clamp(0.98rem, 0.3vw + 0.94rem, 1.08rem); }
      .probe-contact { color: var(--dim); font-size: clamp(0.92rem, 0.25vw + 0.9rem, 1rem); text-align: left; margin-top: .6rem; }
      .probe-contact a { color: var(--accent); text-decoration: none; }
      .probe-contact a:hover { text-decoration: underline; text-underline-offset: 3px; }
      .probe-link { color: var(--accent); text-decoration: none; font-weight: 600; display:inline-flex; align-items:center; gap:.5rem; }
      .probe-link:hover { text-decoration: underline; text-underline-offset: 3px; }
      .btn { display:inline-flex; align-items:center; gap:.6rem; padding:.7rem 1rem; border-radius: 12px; border:1px solid color-mix(in oklab, var(--accent) 25%, var(--line)); color:#04150f; font-weight:600; background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 95%, #fff 0%), color-mix(in oklab, var(--accent) 86%, #000 0%)); box-shadow: 0 10px 25px rgba(124,245,198,0.18), inset 0 1px 0 rgba(255,255,255,0.3); }
      .btn:hover { transform: translateY(-1px); }
      .btn-outline { background: transparent; color: var(--text); border-color: var(--line); box-shadow: inset 0 1px 0 rgba(255,255,255,0.06); }
      .btn-outline:hover { border-color: color-mix(in oklab, var(--accent-2) 35%, var(--line)); color: var(--accent-2); }

      /* Log transformer panel */
      .hero-demo {
        display: grid; grid-template-rows: auto 1fr; gap: .8rem;
        padding: clamp(0.6rem, 1.4vw, 1.2rem);
        border: 1px solid var(--line); border-radius: var(--radius);
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.0)),
                    radial-gradient(130% 100% at 120% -10%, rgba(138,165,255,0.10), transparent 55%),
                    var(--elev);
        box-shadow: var(--shadow-hard);
        min-height: 420px;
      }
      .demo-tabs { display:flex; gap:.4rem; align-items:center; flex-wrap: wrap; }
      .tab { padding:.45rem .75rem; border-radius: 10px; border:1px solid var(--line); color: var(--muted); background: linear-gradient(180deg, #161925, #12131a); cursor: pointer; user-select: none; }
      .tab[aria-selected="true"] { color: var(--text); border-color: color-mix(in oklab, var(--accent-2) 28%, var(--line)); box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--accent-2) 18%, transparent); }
      .demo-tabs .tab { pointer-events: none; opacity: .9; }
      .ratio { margin-left:auto; font-variant-numeric: tabular-nums; color: var(--dim); }

      .logbox {
        font-family: "IBM Plex Mono", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        font-size: clamp(12.5px, 11px + 0.3vw, 14px);
        line-height: 1.55;
        color: #e6f4ff;
        background: linear-gradient(180deg, rgba(12, 19, 24, 0.85), rgba(9, 12, 15, 0.9));
        border: 1px solid #0e2530;
        border-radius: 12px;
        padding: 0.9rem 1rem;
        overflow: auto;
        min-height: 0;
        box-shadow: inset 0 12px 40px rgba(0,0,0,0.35);
        text-shadow: 0 1px 0 rgba(0,0,0,0.4);
      }
      .logbox .code { white-space: pre; margin: .25rem 0; padding: 0; background: transparent; border: 0; color: inherit; line-height: 1.5; font-size: 12px; }
      .anno { margin: .55rem 0 .7rem; padding: .55rem .7rem; border-left: 3px solid var(--accent-2); border-radius: 8px; background: linear-gradient(180deg, rgba(255,255,255,0.035), rgba(255,255,255,0.015)); color: var(--muted); }
      .anno h4 { margin: 0 0 .25rem 0; font-size: var(--step--1); color: var(--text); font-weight: 600; }
      .anno p { margin: 0; font-size: var(--step--1); }
      .logbox .muted { color: #86a4b2; }
      .logbox .mask  { color: #99f3c8; }
      .logbox .key   { color: #8aa5ff; }
      .logbox .val   { color: #ffeaa2; }
      .logbox .err   { color: #ff9090; }

      /* Content sections */
      .section { margin-top: clamp(2rem, 6vw, 6rem); }
      .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: clamp(1rem, 2.6vw, 2.6rem); align-items: start; }
      @media (max-width: 980px) { .grid-2 { grid-template-columns: 1fr; } }
      .card { border:1px solid var(--line); border-radius: var(--radius); padding: clamp(1rem, 2vw, 1.6rem); background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0)); box-shadow: var(--shadow-soft); }
      .list { margin: 0; padding-left: 1.1em; }
      .list li { margin: .4rem 0; color: var(--muted); }

      footer { margin-top: 0; padding: 0 0 var(--pad) 0; color: var(--dim); font-size: var(--step--1); }

      /* Navigation Bar */
      .site-nav {
        position: sticky;
        top: 0;
        z-index: 1000;
        background: rgba(12, 13, 16, 0.85);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-bottom: 1px solid var(--line);
      }
      .nav-container {
        max-width: var(--maxw);
        margin: 0 auto;
        padding: 0.75rem var(--pad);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1rem;
      }
      .nav-brand {
        font-family: "Space Grotesk", Inter, ui-sans-serif, system-ui;
        font-weight: 700;
        font-size: 1.25rem;
        color: var(--text);
        text-decoration: none;
        letter-spacing: -0.01em;
      }
      .nav-brand:hover {
        text-decoration: none;
        color: var(--accent);
      }
      .nav-links {
        display: flex;
        align-items: center;
        gap: 0.25rem;
      }
      .nav-link {
        padding: 0.5rem 0.75rem;
        color: var(--muted);
        font-size: var(--step--1);
        text-decoration: none;
        border-radius: 8px;
        transition: color 0.15s, background 0.15s;
      }
      .nav-link:hover {
        color: var(--text);
        background: rgba(255, 255, 255, 0.05);
        text-decoration: none;
      }
      .nav-dropdown {
        position: relative;
      }
      .nav-dropdown-trigger {
        display: flex;
        align-items: center;
        gap: 0.35rem;
        cursor: pointer;
        background: none;
        border: none;
        font-family: inherit;
        font-size: inherit;
      }
      .nav-dropdown-trigger.is-open .nav-dropdown-arrow {
        transform: rotate(180deg);
      }
      .nav-dropdown-arrow {
        transition: transform 0.2s;
      }
      .nav-mega-menu {
        position: absolute;
        top: 100%;
        left: 50%;
        transform: translateX(-50%);
        padding-top: 12px;
        display: none;
        z-index: 100;
      }
      .nav-mega-menu.open {
        display: block;
      }
      .nav-mega-menu--wide {
        left: 0;
        transform: translateX(-25%);
      }
      .mega-menu-content {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 10px 50px rgba(0, 0, 0, 0.15);
        padding: 1.5rem;
        min-width: 520px;
        border: 1px solid #e2e8f0;
      }
      .nav-mega-menu--wide .mega-menu-content {
        min-width: 680px;
      }
      .mega-menu-label {
        font-size: 0.6875rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #64748b;
        margin-bottom: 1rem;
        padding-left: 0.5rem;
      }
      .mega-menu-divider {
        height: 1px;
        background: #e2e8f0;
        margin: 1rem 0;
      }
      .mega-menu-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
      }
      .mega-menu-grid--3col {
        grid-template-columns: repeat(3, 1fr);
      }
      .mega-menu-card {
        display: flex;
        align-items: flex-start;
        gap: 0.875rem;
        padding: 1rem;
        border-radius: 0.625rem;
        text-decoration: none;
        transition: background 0.15s, transform 0.15s;
        border: 1px solid transparent;
      }
      .mega-menu-card:hover {
        background: #f8fafc;
        border-color: #e2e8f0;
        transform: translateY(-1px);
      }
      .mega-menu-card--active {
        background: #f1f5f9;
        border: 1px solid #e2e8f0;
      }
      .mega-card-icon {
        width: 40px;
        height: 40px;
        border-radius: 0.625rem;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }
      .mega-card-icon svg {
        width: 20px;
        height: 20px;
      }
      .mega-card-icon--probe { background: linear-gradient(135deg, #dbeafe, #bfdbfe); color: #2563eb; }
      .mega-card-icon--visor { background: linear-gradient(135deg, #dcfce7, #bbf7d0); color: #16a34a; }
      .mega-card-icon--mermaid { background: linear-gradient(135deg, #fef3c7, #fde68a); color: #d97706; }
      .mega-card-icon--bigbrain { background: linear-gradient(135deg, #f3e8ff, #e9d5ff); color: #7c3aed; }
      .mega-card-icon--afk { background: linear-gradient(135deg, #e0e7ff, #c7d2fe); color: #4f46e5; }
      .mega-card-icon--vow { background: linear-gradient(135deg, #fee2e2, #fecaca); color: #dc2626; }
      .mega-card-icon--memaris { background: linear-gradient(135deg, #dcfce7, #bbf7d0); color: #16a34a; }
      .mega-card-icon--logoscope { background: linear-gradient(135deg, #ccfbf1, #99f6e4); color: #0d9488; }
      .mega-card-icon--leadership { background: linear-gradient(135deg, #dbeafe, #bfdbfe); color: #2563eb; }
      .mega-card-icon--platform { background: linear-gradient(135deg, #dcfce7, #bbf7d0); color: #16a34a; }
      .mega-card-icon--engineers { background: linear-gradient(135deg, #e0e7ff, #c7d2fe); color: #4f46e5; }
      .mega-card-icon--support { background: linear-gradient(135deg, #fce7f3, #fbcfe8); color: #db2777; }
      .mega-card-icon--agencies { background: linear-gradient(135deg, #fef3c7, #fde68a); color: #d97706; }
      .mega-card-icon--enterprise { background: linear-gradient(135deg, #fee2e2, #fecaca); color: #dc2626; }
      .mega-card-content {
        flex: 1;
        min-width: 0;
      }
      .mega-card-title {
        font-size: 0.9375rem;
        font-weight: 600;
        color: #0f172a;
        margin-bottom: 0.25rem;
      }
      .mega-card-desc {
        font-size: 0.8125rem;
        color: #64748b;
        line-height: 1.5;
      }
      .nav-actions {
        display: flex;
        align-items: center;
        gap: 16px;
      }
      .nav-github {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem;
        color: var(--muted);
        transition: color 0.2s ease;
        text-decoration: none;
        border-radius: 8px;
      }
      .nav-github:hover {
        color: var(--text);
        background: rgba(255, 255, 255, 0.05);
      }
      .nav-github svg {
        display: block;
        width: 20px;
        height: 20px;
      }
      .nav-btn {
        font-size: 0.8125rem;
        font-weight: 600;
        padding: 0.5rem 1rem;
        background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 95%, #fff 0%), color-mix(in oklab, var(--accent) 86%, #000 0%));
        color: #04150f;
        border: none;
        border-radius: 0.5rem;
        text-decoration: none;
        transition: all 0.2s ease;
        box-shadow: 0 4px 12px rgba(124, 245, 198, 0.2);
      }
      .nav-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 16px rgba(124, 245, 198, 0.3);
        text-decoration: none;
      }
      .nav-btn-mobile {
        display: none;
        background: none;
        border: none;
        cursor: pointer;
        padding: 4px;
        color: var(--text);
      }
      /* Mobile Menu */
      .mobile-menu {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        display: none;
        flex-direction: column;
        gap: 1rem;
        padding: 1.5rem;
        background: rgba(12, 13, 16, 0.98);
        backdrop-filter: blur(12px);
        border-bottom: 1px solid var(--line);
        box-shadow: 0 10px 15px rgba(0, 0, 0, 0.3);
      }
      .mobile-menu.open {
        display: flex;
      }
      .mobile-section {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }
      .mobile-section-label {
        font-size: 0.6875rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--accent);
        padding: 0.5rem 0 0.25rem;
      }
      .mobile-sublink {
        display: block;
        font-size: 0.875rem;
        color: var(--muted);
        text-decoration: none;
        padding: 0.375rem 0 0.375rem 0.75rem;
        font-weight: 500;
        border-left: 2px solid var(--line);
        transition: all 0.2s ease;
      }
      .mobile-sublink:hover {
        color: var(--accent);
        border-left-color: var(--accent);
      }
      .mobile-sublink--active {
        color: var(--accent);
        border-left-color: var(--accent);
        font-weight: 600;
      }
      .mobile-link {
        font-size: 1rem;
        color: var(--muted);
        text-decoration: none;
        padding: 0.5rem 0;
        font-weight: 500;
        transition: color 0.2s ease;
      }
      .mobile-link:hover {
        color: var(--text);
      }
      .mobile-cta {
        display: block;
        text-align: center;
        padding: 0.75rem 1rem;
        background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 95%, #fff 0%), color-mix(in oklab, var(--accent) 86%, #000 0%));
        color: #04150f;
        font-weight: 600;
        font-size: 0.875rem;
        border-radius: 8px;
        text-decoration: none;
        margin-top: 0.5rem;
      }
      @media (max-width: 900px) {
        .nav-links {
          display: none;
        }
        .nav-btn-mobile {
          display: flex;
        }
        .nav-actions .nav-btn {
          display: none;
        }
      }

      /* ProbeLabs Footer */
      .probelabs-footer {
        background: #0f172a;
        padding: clamp(3rem, 6vw, 5rem) var(--pad) 0;
        margin-top: clamp(3rem, 6vw, 6rem);
      }
      .footer-container {
        max-width: var(--maxw);
        margin: 0 auto;
      }
      .footer-grid {
        display: grid;
        grid-template-columns: 1.5fr repeat(4, 1fr);
        gap: clamp(2rem, 4vw, 4rem);
      }
      @media (max-width: 900px) {
        .footer-grid {
          grid-template-columns: 1fr 1fr;
          gap: 2rem;
        }
        .footer-brand {
          grid-column: 1 / -1;
        }
      }
      @media (max-width: 500px) {
        .footer-grid {
          grid-template-columns: 1fr;
        }
      }
      .footer-brand h3 {
        font-family: "Space Grotesk", Inter, ui-sans-serif, system-ui;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text);
        margin: 0 0 0.5rem 0;
        letter-spacing: -0.01em;
      }
      .footer-brand .tagline {
        color: var(--dim);
        font-size: var(--step--1);
        margin-bottom: 1rem;
        line-height: 1.5;
      }
      .footer-social {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 0.75rem;
      }
      .footer-social a {
        color: var(--dim);
        transition: color 0.15s;
      }
      .footer-social a:hover {
        color: var(--accent);
      }
      .footer-social svg {
        width: 20px;
        height: 20px;
      }
      .footer-email {
        color: var(--dim);
        font-size: var(--step--1);
      }
      .footer-email a {
        color: var(--dim);
        text-decoration: none;
      }
      .footer-email a:hover {
        color: var(--accent);
        text-decoration: underline;
        text-underline-offset: 2px;
      }
      .footer-col h4 {
        font-family: Inter, ui-sans-serif, system-ui;
        font-size: var(--step--1);
        font-weight: 600;
        color: var(--text);
        margin: 0 0 1rem 0;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
      .footer-col ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      .footer-col li {
        margin-bottom: 0.6rem;
      }
      .footer-col a {
        color: var(--dim);
        font-size: var(--step--1);
        text-decoration: none;
        transition: color 0.15s;
      }
      .footer-col a:hover {
        color: var(--accent);
        text-decoration: none;
      }
      .footer-bottom {
        margin-top: clamp(2rem, 4vw, 3rem);
        padding: 1.5rem 0;
        border-top: 1px solid rgba(255, 255, 255, 0.08);
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: center;
        gap: 1rem;
      }
      .footer-copyright {
        color: var(--dim);
        font-size: var(--step--2);
      }
      .footer-legal {
        display: flex;
        gap: 1.5rem;
      }
      .footer-legal a {
        color: var(--dim);
        font-size: var(--step--2);
        text-decoration: none;
        transition: color 0.15s;
      }
      .footer-legal a:hover {
        color: var(--text);
      }
    </style>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3Y0Z9SZLF2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);} // eslint-disable-line
      gtag('js', new Date());
      gtag('config', 'G-3Y0Z9SZLF2');
    </script>
  </head>
  <body>
    <!-- Navigation Bar -->
    <nav class="site-nav" id="mainNav">
      <div class="nav-container">
        <a href="/" class="nav-brand">ProbeLabs</a>
        <div class="nav-links">
          <!-- Products Dropdown -->
          <div class="nav-dropdown">
            <button class="nav-link nav-dropdown-trigger" onclick="toggleDropdown('products')">
              Products
              <svg class="nav-dropdown-arrow" width="10" height="10" viewBox="0 0 10 10" fill="none"><path d="M2 4l3 3 3-3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <div class="nav-mega-menu" id="dropdown-products">
              <div class="mega-menu-content">
                <div class="mega-menu-section">
                  <div class="mega-menu-label">Core Products</div>
                  <div class="mega-menu-grid">
                    <a href="/probe" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--probe">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Probe</div>
                        <div class="mega-card-desc">AI-native code search across enterprise codebases</div>
                      </div>
                    </a>
                    <a href="/visor" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--visor">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Visor</div>
                        <div class="mega-card-desc">Deterministic workflow engine for agent automation</div>
                      </div>
                    </a>
                  </div>
                  <div class="mega-menu-divider"></div>
                  <div class="mega-menu-label">Labs</div>
                  <div class="mega-menu-grid">
                    <a href="/maid" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--mermaid">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Maid</div>
                        <div class="mega-card-desc">Fast Mermaid linter with auto-fix</div>
                      </div>
                    </a>
                    <a href="/big-brain" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--bigbrain">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2a9 9 0 0 1 9 9c0 3.1-1.5 5.7-4 7.4V20a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-1.6C4.5 16.7 3 14.1 3 11a9 9 0 0 1 9-9z"/><path d="M9 22v-4M15 22v-4M12 2v6"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Big Brain</div>
                        <div class="mega-card-desc">Hand off stuck problems to smarter models</div>
                      </div>
                    </a>
                    <a href="/afk" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--afk">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">AFK</div>
                        <div class="mega-card-desc">Control Claude Code from your phone</div>
                      </div>
                    </a>
                    <a href="/vow" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--vow">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Vow</div>
                        <div class="mega-card-desc">AI accountability gates for commits</div>
                      </div>
                    </a>
                    <a href="/memaris" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--memaris">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 21V9"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Memaris</div>
                        <div class="mega-card-desc">Persistent memory from past AI sessions</div>
                      </div>
                    </a>
                    <a href="/logoscope" class="mega-menu-card mega-menu-card--active">
                      <div class="mega-card-icon mega-card-icon--logoscope">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Logoscope</div>
                        <div class="mega-card-desc">AI-powered log analysis and insights</div>
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Solutions Dropdown -->
          <div class="nav-dropdown">
            <button class="nav-link nav-dropdown-trigger" onclick="toggleDropdown('solutions')">
              Solutions
              <svg class="nav-dropdown-arrow" width="10" height="10" viewBox="0 0 10 10" fill="none"><path d="M2 4l3 3 3-3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <div class="nav-mega-menu nav-mega-menu--wide" id="dropdown-solutions">
              <div class="mega-menu-content">
                <div class="mega-menu-section">
                  <div class="mega-menu-label">By Role</div>
                  <div class="mega-menu-grid mega-menu-grid--3col">
                    <a href="/solutions/engineering-leadership" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--leadership">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Engineering Leadership</div>
                        <div class="mega-card-desc">Org-wide automation with predictability</div>
                      </div>
                    </a>
                    <a href="/solutions/platform-teams" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--platform">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect width="8" height="8" x="3" y="3" rx="2"/><path d="M7 11v4a2 2 0 0 0 2 2h4"/><rect width="8" height="8" x="13" y="13" rx="2"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Platform Teams</div>
                        <div class="mega-card-desc">Build once, run everywhere</div>
                      </div>
                    </a>
                    <a href="/solutions/engineers" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--engineers">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Engineers</div>
                        <div class="mega-card-desc">Full context, any codebase</div>
                      </div>
                    </a>
                    <a href="/solutions/non-technical" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--support">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Product & Support</div>
                        <div class="mega-card-desc">Engineering-grade context without the bottleneck</div>
                      </div>
                    </a>
                    <a href="/solutions/agencies" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--agencies">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Agencies</div>
                        <div class="mega-card-desc">Repeatable delivery on client codebases</div>
                      </div>
                    </a>
                    <a href="/solutions/enterprise" class="mega-menu-card">
                      <div class="mega-card-icon mega-card-icon--enterprise">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                      </div>
                      <div class="mega-card-content">
                        <div class="mega-card-title">Enterprise</div>
                        <div class="mega-card-desc">Transform legacy codebases at scale</div>
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <a href="/docs" class="nav-link">Docs</a>
        </div>
        <div class="nav-actions">
          <a href="https://github.com/probelabs/logoscope" target="_blank" rel="noopener noreferrer" class="nav-github" aria-label="GitHub">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/>
              <path d="M9 18c-4.51 2-5-2-7-2"/>
            </svg>
          </a>
          <button class="nav-btn-mobile" aria-label="Menu" onclick="toggleMobileMenu()">
            <svg class="menu-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>
            </svg>
            <svg class="close-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
              <path d="M18 6 6 18"/><path d="m6 6 12 12"/>
            </svg>
          </button>
          <a href="/docs/getting-started" class="nav-btn">Get Started</a>
        </div>
      </div>
      <!-- Mobile Menu -->
      <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-section">
          <div class="mobile-section-label">Core Products</div>
          <a href="/probe" class="mobile-sublink">Probe</a>
          <a href="/visor" class="mobile-sublink">Visor</a>
        </div>
        <div class="mobile-section">
          <div class="mobile-section-label">Labs</div>
          <a href="/maid" class="mobile-sublink">Maid</a>
          <a href="/big-brain" class="mobile-sublink">Big Brain</a>
          <a href="/afk" class="mobile-sublink">AFK</a>
          <a href="/vow" class="mobile-sublink">Vow</a>
          <a href="/memaris" class="mobile-sublink">Memaris</a>
          <a href="/logoscope" class="mobile-sublink mobile-sublink--active">Logoscope</a>
        </div>
        <div class="mobile-section">
          <div class="mobile-section-label">Solutions</div>
          <a href="/solutions/engineering-leadership" class="mobile-sublink">Engineering Leadership</a>
          <a href="/solutions/platform-teams" class="mobile-sublink">Platform Teams</a>
          <a href="/solutions/engineers" class="mobile-sublink">Engineers</a>
          <a href="/solutions/non-technical" class="mobile-sublink">Product & Support</a>
          <a href="/solutions/agencies" class="mobile-sublink">Agencies</a>
          <a href="/solutions/enterprise" class="mobile-sublink">Enterprise</a>
        </div>
        <a href="/docs" class="mobile-link">Docs</a>
        <a href="https://github.com/probelabs/logoscope" class="mobile-link" target="_blank">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:inline;vertical-align:middle;margin-right:0.5rem;">
            <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"/>
            <path d="M9 18c-4.51 2-5-2-7-2"/>
          </svg>
          GitHub
        </a>
        <a href="/docs/getting-started" class="mobile-cta">Get Started</a>
      </div>
    </nav>

    <!-- Experimental: Entropy → Structure Lab (full-bleed) -->
    <section class="stage" id="lab" aria-label="Entropy to Structure">
      <canvas id="world" aria-hidden="true"></canvas>
      <pre id="stream" class="stream" aria-hidden="true"></pre>
      <div class="stage-overlay">
        <div class="stage-top">
          <div class="stage-left">
            <div class="brandline">
              <span class="brandmark big">Logoscope</span>
              <a class="btn btn-outline github-btn" href="https://github.com/probelabs/logoscope" target="_blank" rel="noopener" aria-label="View on GitHub" style="font-size: var(--step--1); padding: 0.5rem 0.75rem; margin-left: 1.5rem;">
                <svg aria-hidden="true" width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.38 0 12c0 5.3 3.44 9.79 8.2 11.39.6.1.8-.26.8-.58v-2.24c-3.34.73-4.03-1.42-4.03-1.42-.55-1.39-1.33-1.76-1.33-1.76-1.09-.74.08-.72.08-.72 1.2.08 1.84 1.24 1.84 1.24 1.07 1.83 2.8 1.3 3.49.99.1-.77.42-1.3.76-1.6-2.67-.31-5.47-1.34-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.12-.3-.53-1.52.12-3.18 0 0 1.01-.32 3.3 1.23a11.5 11.5 0 0 1 6.02 0c2.28-1.55 3.29-1.23 3.29-1.23.65 1.66.24 2.88.12 3.18.77.84 1.24 1.91 1.24 3.22 0 4.61-2.81 5.62-5.48 5.92.43.37.82 1.1.82 2.22v3.29c0 .32.19.7.8.58C20.56 21.8 24 17.3 24 12 24 5.38 18.63 0 12 0z"/></svg>
                View on GitHub
              </a>
            </div>
            <div class="titleblock">
              <h1 class="xdisplay" id="labTitle">Noise → Narrative</h1>
              <p class="lede">Gigabytes of logs → kilobytes of AI-ready insights.<br>Pattern and anomaly log extraction for AI and humans.</p>
              <div class="cli-quickstart">
              <div class="cli-card">
                <div class="cli-title">AI quick start</div>
                <p style="color: var(--muted); margin-bottom: 1rem; font-size: var(--step--1);">Connect Logoscope to Claude Desktop and analyze logs with natural language.</p>
<pre class="cli"><span class="prompt">$</span> claude mcp add logoscope -- npx -y @probelabs/logoscope@latest mcp</pre>
                <p style="color: var(--dim); margin: 0.8rem 0; font-size: var(--step--1);">Or manually add to <code>~/.claude/mcp.json</code> 
                  <a href="#" id="jsonConfigLink" style="color: var(--accent); text-decoration: none; margin-left: 0.5rem;">(JSON config)</a>:</p>
<pre class="cli" id="mcpConfig" style="display: none;">{
  "mcpServers": {
    "logoscope": {
      "type": "stdio",
      "command": "npx",
      "args": ["-y", "@probelabs/logoscope@latest", "mcp"]
    }
  }
}</pre>
                <p style="color: var(--dim); margin: 0.8rem 0; font-size: var(--step--1);">Then ask Claude:</p>
<pre class="cli" style="background: #0a1a0f; border-color: #2a4a2f;"><span style="color: var(--accent);">"Analyze these logs: /var/log/app.log"</span></pre>
                <small class="cli-note">Claude will automatically use fast triage analysis first, then deep analysis if needed.</small>
              </div>
              
              <div class="cli-card">
                <div class="cli-title">CLI quick start</div>
                <p style="color: var(--muted); margin-bottom: 1rem; font-size: var(--step--1);">Two-step workflow: start with <code>--triage</code> for fast insights, then deep analysis.</p>
<pre class="cli"><span class="prompt">$</span> # Step 1: Quick triage (fast anomaly detection)
<span class="prompt">$</span> npx -y @probelabs/logoscope@latest --triage logs/app-*.log</pre>
<pre class="cli"><span class="prompt">$</span> # Step 2: Full analysis (if anomalies found)
<span class="prompt">$</span> npx -y @probelabs/logoscope@latest logs/app-*.log --out insights.json</pre>
<pre class="cli"><span class="prompt">$</span> # Streaming logs
<span class="prompt">$</span> kubectl logs -n prod deploy/web --since=30m | npx -y @probelabs/logoscope@latest --triage
<span class="prompt">$</span> journalctl -u api -o json | npx -y @probelabs/logoscope@latest --out insights.json</pre>
                <small class="cli-note">Use <code>--triage</code> first for fast results, then run without it for comprehensive analysis. Accepts multiple files, globs, or standard input.</small>
              </div>
              </div>
              </div>
            </div>
          <div class="stage-insights" id="insights">
            <div class="logbox" id="insightsBox" style="min-height: 220px;" role="region" aria-label="Insights output">
              <pre class="code">{</pre>
              <div class="anno"><h4>Anomalies</h4><p>High‑signal items first: temporal spikes and new/rare patterns.</p></div>
<pre class="code">  "anomalies": {
    "temporal_anomalies": [
      {
        "type": "FrequencySpike",
        "template": "ERROR Database connection failed: &lt;*&gt;",
        "at": "2025-09-05T14:20:00Z",
        "value": 127,
        "baseline": 18
      },
    ],
    "pattern_anomalies": [
      {
        "type": "NewPattern",
        "template": "WARN retry=&lt;*&gt; exceeded for op=&lt;*&gt;",
        "first_seen": "2025-09-05T14:19:45Z"
      },
      {
        "type": "RarePattern",
        "template": "Payment declined: &lt;*&gt;",
        "frequency": 0.0031
      }
    ]
  },</pre>
              <div class="anno"><h4>Patterns</h4><p>Top templates with severity, trend, and examples.</p></div>
<pre class="code">  "patterns": [
    {
      "template": "ERROR Database connection failed: &lt;*&gt;",
      "frequency": 0.0234,
      "total_count": 11700,
      "severity": "ERROR",
      "temporal": { "bursts": 2, "largest_burst": "2025-09-05T14:20:00Z", "trend": "increasing" },
      "examples": ["ERROR Database connection failed: timeout"]
    },
    {
      "template": "INFO user=&lt;*&gt; op=login ip=&lt;IP&gt;",
      "frequency": 0.1542,
      "total_count": 77100,
      "severity": "INFO",
      "temporal": { "bursts": 0, "largest_burst": null, "trend": "steady" },
      "examples": ["INFO user=9214 op=login ip=10.5.22.18"]
    },
    {
      "template": "level=info op=logout user_id=&lt;*&gt; status=&lt;*&gt;",
      "frequency": 0.0875,
      "total_count": 43750,
      "severity": "INFO",
      "temporal": { "bursts": 0, "largest_burst": null, "trend": "steady" },
      "examples": ["{\"level\":\"info\",\"user_id\":9876,\"op\":\"logout\",\"status\":\"ok\"}"]
    }
  ]</pre>
              <pre class="code">}</pre>
            </div>
          </div>
        </div>
        <div class="stage-story">
          <div class="story">
            <div>
              <p class="eyebrow">The Problem</p>
              <p>Production is down. Your logs are <strong>gigabytes of noise</strong>: thousands of identical lines, buried anomalies, and patterns too complex for grep. Uploading to AI fails — context windows overflow, tokens waste on repetition, and temporal patterns vanish in copy-paste.</p>

              <p class="eyebrow">How It Works</p>
              <p>Logoscope uses the <strong>Drain algorithm</strong> to extract log templates, replacing variables with wildcards. We identify <strong>anomalies</strong> (new patterns, frequency spikes, numeric outliers), track <strong>temporal dynamics</strong> (bursts, gaps, trends), and compress millions of lines into <strong>kilobytes of structured JSON</strong>.</p>
            </div>
            <div>
              <p class="eyebrow">What You Get</p>
              <p>A <strong>complete analysis</strong> that fits in AI context: pattern statistics with severity and trends, temporal anomalies with exact timestamps, schema changes and field evolution, plus queryable access to raw logs. Use <strong>--triage</strong> for rapid anomaly detection, then deep-dive when needed.</p>

              <p class="eyebrow">Real Questions, Real Answers</p>
              <p>"What spiked at 14:20?" • "Show new error patterns from today" • "Which fields changed before the outage?" • "Extract payment failures with context" — <strong>Logoscope makes logs answerable</strong>.</p>
            </div>
          </div>
        </div>
        
      </div>
  </section>

    <!-- Probe Ecosystem Section (adapted) -->
    <section class="probe-section">
      <div class="probe-content">
        <h2 class="probe-header">Part of the Probe Ecosystem</h2>
        <div class="probe-card">
          <div class="probe-logo-wrapper">
            <img src="https://probelabs.com/logo.png" alt="Probelabs" class="probe-logo" />
          </div>
          <div class="probe-info">
            <div class="probe-info-row">
            <p>
              Logoscope is part of Probe's vision: tools that help humans and AI work together on real‑world systems.
              Where Probe gives AI the right context, Logoscope distills massive logs into compact, queryable insight—
              patterns, bursts, and anomalies that actually fit into AI context windows while preserving a link back to raw evidence.
            </p>
            <div class="probe-contact">Questions or feedback? Reach out at <a href="mailto:hello@probelabs.com">hello@probelabs.com</a></div>
            </div>
            <a class="probe-link" href="https://probelabs.com" target="_blank" rel="noopener">Explore Probe Ecosystem →</a>
          </div>
        </div>
      </div>
    </section>

    <footer class="probelabs-footer">
      <div class="footer-container">
        <div class="footer-grid">
          <div class="footer-brand">
            <h3>ProbeLabs</h3>
            <p class="tagline">The Operating System for Agentic Engineering</p>
            <div class="footer-social">
              <a href="https://github.com/probelabs" target="_blank" rel="noopener" aria-label="GitHub">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.38 0 12c0 5.3 3.44 9.79 8.2 11.39.6.1.8-.26.8-.58v-2.24c-3.34.73-4.03-1.42-4.03-1.42-.55-1.39-1.33-1.76-1.33-1.76-1.09-.74.08-.72.08-.72 1.2.08 1.84 1.24 1.84 1.24 1.07 1.83 2.8 1.3 3.49.99.1-.77.42-1.3.76-1.6-2.67-.31-5.47-1.34-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.12-.3-.53-1.52.12-3.18 0 0 1.01-.32 3.3 1.23a11.5 11.5 0 0 1 6.02 0c2.28-1.55 3.29-1.23 3.29-1.23.65 1.66.24 2.88.12 3.18.77.84 1.24 1.91 1.24 3.22 0 4.61-2.81 5.62-5.48 5.92.43.37.82 1.1.82 2.22v3.29c0 .32.19.7.8.58C20.56 21.8 24 17.3 24 12 24 5.38 18.63 0 12 0z"/></svg>
              </a>
            </div>
            <p class="footer-email"><a href="mailto:hello@probelabs.com">hello@probelabs.com</a></p>
          </div>
          <div class="footer-col">
            <h4>Products</h4>
            <ul>
              <li><a href="/probe">Probe</a></li>
              <li><a href="/visor">Visor</a></li>
              <li><a href="/maid">Maid</a></li>
              <li><a href="/big-brain">Big Brain</a></li>
              <li><a href="/afk">AFK</a></li>
              <li><a href="/vow">Vow</a></li>
              <li><a href="/memaris">Memaris</a></li>
              <li><a href="/logoscope">Logoscope</a></li>
            </ul>
          </div>
          <div class="footer-col">
            <h4>Solutions</h4>
            <ul>
              <li><a href="/solutions/engineering-leadership">Engineering Leadership</a></li>
              <li><a href="/solutions/platform-teams">Platform Teams</a></li>
              <li><a href="/solutions/agencies">Agencies</a></li>
              <li><a href="/solutions/enterprise">Enterprise</a></li>
            </ul>
          </div>
          <div class="footer-col">
            <h4>Resources</h4>
            <ul>
              <li><a href="/docs/getting-started">Quick Start</a></li>
              <li><a href="/docs">Documentation</a></li>
              <li><a href="/docs/workflows">Workflow Examples</a></li>
              <li><a href="https://github.com/probelabs" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
          </div>
          <div class="footer-col">
            <h4>Company</h4>
            <ul>
              <li><a href="/about">About</a></li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p class="footer-copyright">&copy; 2026 ProbeLabs Inc. All rights reserved.</p>
          <div class="footer-legal">
            <a href="/privacy">Privacy</a>
            <a href="/terms">Terms</a>
          </div>
        </div>
      </div>
    </footer>


    <script>
      // Entropy Lab: one dial controls both visuals and typography
      const root = document.documentElement;
      const entropyInput = document.getElementById('entropy');
      const patternsEl = document.getElementById('patterns');
      const ratioLiveEl = document.getElementById('ratioLive');
      const titleEl = document.getElementById('labTitle');
      const streamEl = document.getElementById('stream');

      function setEntropy(v) {
        // v: 0 (structured) → 100 (chaos)
        const e = Math.max(0, Math.min(100, Number(v)));
        const t = (100 - e) / 100; // structure factor 0..1
        root.style.setProperty('--entropy', e);
        // Typography morph
        const blur = (e * 0.08).toFixed(2) + 'rem';
        // Background logs: slower, low max blur in px (read lines, not words)
        const revBlur = (Math.pow((100 - e)/100, 0.55) * 2.2).toFixed(2) + 'px';
        const track = (e * 0.004 - 0.02).toFixed(3) + 'em'; // negative at structure
        const opsz = (9 + (144 - 9) * (t*t)).toFixed(2); // finer detail as structure ↑
        root.style.setProperty('--blur', blur);
        root.style.setProperty('--rev-blur', revBlur);
        // Background stream opacity: fade slightly as blur increases
        const streamAlpha = (0.22 - 0.10 * t).toFixed(2); // 0.22 → ~0.12
        root.style.setProperty('--stream-alpha', streamAlpha);
        root.style.setProperty('--trk', track);
        root.style.setProperty('--opsz', opsz);
        // Title dramatization
        titleEl.textContent = t > 0.66 ? 'Signal > Noise' : (t > 0.33 ? 'Noise → Narrative' : 'Raw → Pattern');
        // Crossfade demo → insights
        const ins = Math.min(1, Math.max(0, Math.pow(t, 1.2)));
        const dem = Math.min(1, Math.max(0, 1 - Math.pow(t, 1.0) * 0.4));
        root.style.setProperty('--insight-alpha', ins.toFixed(3));
        root.style.setProperty('--demo-alpha', dem.toFixed(3));
        if (typeof updateViewForEntropy === 'function') updateViewForEntropy();
      }
      if (entropyInput) {
        entropyInput.addEventListener('input', e => setEntropy(e.target.value));
        setEntropy(entropyInput.value);
      } else {
        setEntropy(100);
      }

      // JSON config toggle functionality
      const jsonConfigLink = document.getElementById('jsonConfigLink');
      const mcpConfig = document.getElementById('mcpConfig');
      
      if (jsonConfigLink && mcpConfig) {
        jsonConfigLink.addEventListener('click', function(e) {
          e.preventDefault();
          if (mcpConfig.style.display === 'none' || mcpConfig.style.display === '') {
            mcpConfig.style.display = 'block';
            jsonConfigLink.textContent = '(hide config)';
          } else {
            mcpConfig.style.display = 'none';
            jsonConfigLink.textContent = '(JSON config)';
          }
        });
      }

      // Remove particle noise rendering; keep only streaming logs background
    </script>

    <script>
      // Navigation functions for mega-menu
      function toggleDropdown(name) {
        const dropdown = document.getElementById('dropdown-' + name);
        const trigger = dropdown.previousElementSibling;
        const allDropdowns = document.querySelectorAll('.nav-mega-menu');
        const allTriggers = document.querySelectorAll('.nav-dropdown-trigger');

        // Close other dropdowns
        allDropdowns.forEach(d => {
          if (d !== dropdown) d.classList.remove('open');
        });
        allTriggers.forEach(t => {
          if (t !== trigger) t.classList.remove('is-open');
        });

        // Toggle current dropdown
        dropdown.classList.toggle('open');
        trigger.classList.toggle('is-open');
      }

      function toggleMobileMenu() {
        const mobileMenu = document.getElementById('mobileMenu');
        const menuIcon = document.querySelector('.menu-icon');
        const closeIcon = document.querySelector('.close-icon');

        mobileMenu.classList.toggle('open');

        if (mobileMenu.classList.contains('open')) {
          menuIcon.style.display = 'none';
          closeIcon.style.display = 'block';
        } else {
          menuIcon.style.display = 'block';
          closeIcon.style.display = 'none';
        }
      }

      // Close dropdowns when clicking outside
      document.addEventListener('click', function(event) {
        if (!event.target.closest('.nav-dropdown')) {
          document.querySelectorAll('.nav-mega-menu').forEach(d => d.classList.remove('open'));
          document.querySelectorAll('.nav-dropdown-trigger').forEach(t => t.classList.remove('is-open'));
        }
      });

      // Subtle interactive polish: moving lens highlight follows pointer
      const lens = document.querySelector('.lens-scan');
      document.addEventListener('pointermove', (e) => {
        const r = document.body.getBoundingClientRect();
        const x = ((e.clientX - r.left) / r.width) * 100;
        const y = ((e.clientY - r.top) / r.height) * 100;
        lens && lens.style.setProperty('--x', x + '%');
        lens && lens.style.setProperty('--y', y + '%');
      });
      // Log generator + transformer + view mode bound to entropy
      const box = document.getElementById('logbox');
      const tabs = Array.from(document.querySelectorAll('.tab'));
      const ratio = document.getElementById('ratio');

      const rawBuf = [];
      const maskedBuf = [];
      const templateCounts = new Map();
      const maxBuf = 80;
      let totalRawChars = 0;

      function pad2(n){ return (n<10?'0':'')+n; }
      function isoNow(){ const d=new Date(); return d.getUTCFullYear()+ '-' + pad2(d.getUTCMonth()+1) + '-' + pad2(d.getUTCDate()) + 'T' + pad2(d.getUTCHours()) + ':' + pad2(d.getUTCMinutes()) + ':' + pad2(d.getUTCSeconds()) + 'Z'; }

      function rand(a,b){ return a + Math.random()*(b-a); }
      function randInt(a,b){ return Math.floor(rand(a,b+1)); }
      function choice(arr){ return arr[(arr.length*Math.random())|0]; }

      const users = Array.from({length: 60}, (_,i)=> 1000+i);
      const ops = ['login','logout','purchase','reset_password','query','cache_get','cache_set'];
      const statuses = ['ok','ok','ok','ok','fail'];
      const errors = [
        'Database connection failed: timeout',
        'Database connection failed: ECONNREFUSED',
        'S3 PutObject failed: 403 AccessDenied',
        'Payment declined: insufficient_funds',
        'NullPointerException at UserService:42',
        '429 Too Many Requests from <IP>'
      ];

      function randomIP(){ return `${randInt(10,240)}.${randInt(0,255)}.${randInt(0,255)}.${randInt(1,254)}`; }
      function randomUUID(){ const s=()=>Math.floor((1+Math.random())*0x10000).toString(16).slice(1); return `${s()+s()}-${s()}-${s()}-${s()}-${s()+s()+s()}`; }

      function genPlain(){
        const ts = isoNow();
        const level = Math.random()<0.88? (Math.random()<0.1?'WARN':'INFO') : 'ERROR';
        if (level==='ERROR') {
          const msg = choice(errors).replace('<IP>', randomIP());
          return `${ts} app[web.1]: ${level} ${msg}`;
        }
        const user = choice(users);
        const op = choice(ops);
        const ip = randomIP();
        const latency = randInt(10, 400);
        return `${ts} app[web.1]: ${level} user=${user} op=${op} ip=${ip} latency_ms=${latency}`;
      }

      function genJSON(){
        const level = Math.random()<0.9? 'info' : 'error';
        const base = { level, user_id: choice(users), op: choice(ops), request_id: randomUUID() };
        if (level==='error') {
          base.status = 'fail';
          base.error = choice(errors).replace('<IP>', randomIP());
          base.retry_count = randInt(0,3);
        } else {
          base.status = choice(statuses);
          if (Math.random()<0.2) base.ip = randomIP();
          if (Math.random()<0.3) base.latency_ms = randInt(8, 500);
        }
        return JSON.stringify(base);
      }

      function generateLine(){
        return Math.random() < 0.65 ? genPlain() : genJSON();
      }

      function mask(line){
        // JSON → synthetic key=val string; otherwise pass-through masking
        let synthetic = line;
        try {
          const obj = JSON.parse(line);
          const keys = Object.keys(obj).sort();
          synthetic = keys.map(k => `${k}=${obj[k]}`).join(' ');
        } catch(_) {}
        return synthetic
          .replace(/\b(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z)\b/g, '<TIMESTAMP>')
          .replace(/\b(?:INFO|WARN|ERROR|DEBUG|info|warn|error|debug)\b/g, '<LEVEL>')
          .replace(/\b\d+\.\d+\.\d+\.\d+\b/g, '<IP>')
          .replace(/\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\b/gi, '<UUID>')
          .replace(/(user_id|user|latency_ms|retry_count|amount)=\d+/g, '$1=<NUM>')
          .replace(/\b\d+\b/g, (m)=> m.length>3 ? '<NUM>' : m); // conservative
      }

      function toTemplate(masked){
        return masked
          .replace(/<TIMESTAMP>|<UUID>|<NUM>|<IP>/g, '<*>')
          .replace(/\s+/g, ' ')
          .replace(/^\s+|\s+$/g, '');
      }

      function tint(line){
        return line
          .replace(/\b(ERROR|INFO|WARN|DEBUG|error|info|warn|debug)\b/g, '<span class="err">$1</span>')
          .replace(/([a-z0-9_]+)(=)/gi, '<span class="key">$1</span>$2')
          .replace(/<([A-Z\*]+)>/g, '<span class="mask">&lt;$1&gt;</span>')
          .replace(/(\d+\.\d+\.\d+\.\d+)/g, '<span class="val">$1</span>')
          .replace(/(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z)/g, '<span class="muted">$1</span>');
      }

      function updateStats(){
        const uniqueTemplates = Array.from(templateCounts.keys());
        if (patternsEl) patternsEl.textContent = uniqueTemplates.length.toLocaleString();
        const templatesChars = uniqueTemplates.reduce((a,t)=> a + t.length, 0) || 1;
        const comp = Math.max(1, Math.round((totalRawChars / templatesChars)));
        if (ratioLiveEl) ratioLiveEl.textContent = comp.toLocaleString() + '×';
        // Also update demo ratio when in templates mode
        if (ratio && currentMode()==='templates') ratio.textContent = comp.toLocaleString() + '× reduction (est)';
      }

      // Insight derivation (summary + patterns + schema + temporal bursts)
      const insightsBox = document.getElementById('insightsBox');
      let totalLines = 0; let t0 = Date.now();
      const perSecond = new Map();
      const baselineFields = new Set();
      const schemaSeen = new Set();
      const schemaAdded = new Set();
      const schemaChanges = [];
      const templateSeverity = new Map(); // tpl -> {ERROR: n, WARN: n, INFO: n}
      const tplExample = new Map();      // tpl -> example raw line
      const tplBuckets = new Map();      // tpl -> Map(second -> count)
      const tplFirstSeen = new Map();    // tpl -> ms

      function secKey(ts){ return Math.floor(ts/1000); }
      function severityOf(line){
        const s = line.toLowerCase();
        if (s.includes('error')) return 'ERROR';
        if (s.includes('warn')) return 'WARN';
        return 'INFO';
      }

      function trackTemporal(tpl){
        const now = Date.now();
        const key = secKey(now);
        perSecond.set(key, (perSecond.get(key)||0) + 1);
        // per template
        if (!tplBuckets.has(tpl)) tplBuckets.set(tpl, new Map());
        const m = tplBuckets.get(tpl);
        m.set(key, (m.get(key)||0) + 1);
        // trim to last 90s
        for (const k of Array.from(perSecond.keys())){
          if (k < secKey(now) - 90) perSecond.delete(k);
        }
        if (m) {
          for (const k of Array.from(m.keys())){
            if (k < secKey(now) - 90) m.delete(k);
          }
        }
      }

      function trackSchemaMaybe(line){
        try {
          const obj = JSON.parse(line);
          const fields = Object.keys(obj).sort();
          // Initialize baseline once
          if (baselineFields.size === 0) fields.forEach(f => baselineFields.add(f));
          for (const f of fields){
            const key = `f:${f}`;
            if (!schemaSeen.has(key)){
              schemaSeen.add(key);
              if (!baselineFields.has(f) && !schemaAdded.has(f)){
                schemaAdded.add(f);
                schemaChanges.push({ change_type: 'field_added', field: f, at: new Date().toISOString() });
                if (schemaChanges.length>6) schemaChanges.shift();
              }
            }
          }
        } catch(_){}
      }

      function updateInsights(){
        // Summary
        const uniqueTemplates = Array.from(templateCounts.keys());
        const templatesChars = uniqueTemplates.reduce((a,t)=> a + t.length, 0) || 1;
        const comp = Math.max(1, Math.round((totalRawChars / templatesChars)));
        // insights header counter removed in UI

        const nowISO = new Date().toISOString();
        const startISO = new Date(t0).toISOString();
        const summary = {
          total_lines: totalLines,
          unique_patterns: uniqueTemplates.length,
          compression_ratio: comp,
          time_span: `${startISO} to ${nowISO}`
        };

        // Patterns enriched to resemble AiOutput
        const rows = Array.from(templateCounts.entries()).sort((a,b)=> b[1]-a[1]).slice(0,4);
        const patterns = rows.map(([tpl,count]) => {
          const sevCounts = templateSeverity.get(tpl) || {};
          const severity = ['ERROR','WARN','INFO'].reduce((a,s)=> (sevCounts[s]||0)>(sevCounts[a]||0)? s : a, 'INFO');
          // temporal per template
          const m = tplBuckets.get(tpl) || new Map();
          const vals = Array.from(m.values());
          const med = vals.length ? vals.slice().sort((x,y)=>x-y)[Math.floor(vals.length/2)] : 0;
          const thr = med ? med*3 : 0;
          let bursts = 0, largest = null, maxv = 0;
          for (const [k,v] of m){ if (thr && v>thr) bursts++; if (v>maxv){ maxv=v; largest=k; } }
          const largest_burst = largest ? new Date(largest*1000).toISOString() : null;
          // simple trend: last 3s vs prev 3s
          const ks = Array.from(m.keys()).sort((a,b)=>a-b);
          const last3 = ks.slice(-3).reduce((s,k)=> s + (m.get(k)||0), 0);
          const prev3 = ks.slice(-6,-3).reduce((s,k)=> s + (m.get(k)||0), 0);
          const trend = last3 > prev3 ? 'increasing' : (last3 < prev3 ? 'decreasing' : 'steady');
          const freq = totalLines ? +(count / totalLines).toFixed(4) : 0;
          const examples = tplExample.has(tpl) ? [tplExample.get(tpl)] : [];
          return { template: tpl, frequency: freq, total_count: count, severity, temporal: { bursts, largest_burst, trend }, examples };
        });

        // Critical issues: count of ERROR patterns in top set
        summary.critical_issues = patterns.filter(p => p.severity === 'ERROR').length;

        // Schema changes tracked internally but not shown in UI

        // Anomalies: new + rare patterns; temporal spikes
        const nowMs = Date.now();
        const pattern_anomalies = [];
        const patternSeen = new Set();
        function addPatternAnom(obj){ if (!patternSeen.has(obj.template) && pattern_anomalies.length < 2) { patternSeen.add(obj.template); pattern_anomalies.push(obj); } }
        // new patterns (first 5s)
        for (const [tpl, ms] of tplFirstSeen) {
          if (pattern_anomalies.length >= 2) break;
          if (nowMs - ms < 5000) addPatternAnom({ type: 'NewPattern', template: tpl, first_seen: new Date(ms).toISOString() });
        }
        // rare patterns (freq < 1%)
        if (pattern_anomalies.length < 2) {
          const allRows = Array.from(templateCounts.entries());
          allRows.sort((a,b)=> (a[1]/Math.max(1,totalLines)) - (b[1]/Math.max(1,totalLines)));
          for (const [tpl,count] of allRows) {
            if (pattern_anomalies.length >= 2) break;
            const freq = totalLines ? count/totalLines : 0;
            if (freq > 0 && freq < 0.01) addPatternAnom({ type: 'RarePattern', template: tpl, frequency: +freq.toFixed(4) });
          }
        }
        const temporal_anomalies = [];
        const temporalSeen = new Set();
        for (const [tpl, bucketsMap] of tplBuckets) {
          const vals = Array.from(bucketsMap.values());
          if (!vals.length) continue;
          const med = vals.slice().sort((x,y)=>x-y)[Math.floor(vals.length/2)] || 0;
          const thr = med ? med*3 : 0;
          for (const [sec, v] of bucketsMap){
            if (temporal_anomalies.length >= 2) break;
            if (thr && v>thr && !temporalSeen.has(tpl)) { temporalSeen.add(tpl); temporal_anomalies.push({ type: 'FrequencySpike', template: tpl, at: new Date(sec*1000).toISOString(), value: v, baseline: med }); break; }
          }
          if (temporal_anomalies.length >= 2) break;
        }
        const anomalies = { temporal_anomalies, pattern_anomalies };
        // Query hints omitted from UI in hero

        // Place anomalies first; only show anomalies and patterns
        const out = { anomalies, patterns };

        function esc(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

        function section(key, obj, isLast=false){
          const json = JSON.stringify(obj, null, 2);
          const lines = json.split('\n');
          // attach key with proper indentation and indent inner block by two spaces
          const first = '  "' + key + '": ' + lines[0];
          const rest = lines.slice(1).map(l => '  ' + l);
          let block = [first].concat(rest).join('\n');
          if (!isLast) block = block + ',';
          return `<pre class="code">${esc(block)}</pre>`;
        }

        function docHTML(o){
          const parts = [];
          parts.push(`<pre class="code">{</pre>`);
          parts.push(`<div class="anno"><h4>Anomalies</h4><p>High‑signal items first: temporal spikes and new/rare patterns.</p></div>`);
          parts.push(section('anomalies', o.anomalies));
          parts.push(`<div class="anno"><h4>Patterns</h4><p>Top templates with severity, trend, and examples.</p></div>`);
          parts.push(section('patterns', o.patterns, true));
          // No schema changes or query hints in hero view
          // Close object after patterns
          // Ensure trailing comma handling by marking patterns as last
          parts.push(`<pre class="code">}</pre>`);
          return parts.join('');
        }

        insightsBox.innerHTML = docHTML(out);
      }

      function render(mode){
        // Update tabs selection where a dataset mode exists
        tabs.forEach(t => { if (t.dataset && 'mode' in t.dataset) t.setAttribute('aria-selected', String(t.dataset.mode === mode)); });
        let html;
        if (mode==='raw') {
          html = rawBuf.map(tint).join('\n');
          if (ratio) ratio.textContent = '—';
        } else if (mode==='masked') {
          html = maskedBuf.map(tint).join('\n');
          if (ratio) ratio.textContent = '—';
        } else {
          const rows = Array.from(templateCounts.entries()).sort((a,b)=> b[1]-a[1]);
          html = rows.map(([tpl,cnt])=> `<span class="muted">${String(cnt).padStart(4,' ')}</span> × ${tint(tpl)}`).join('\n');
        }
        if (box) box.innerHTML = html;
      }

      function currentMode(){
        const e = Number(getComputedStyle(root).getPropertyValue('--entropy')) || 0;
        if (e >= 67) return 'raw';
        if (e >= 34) return 'masked';
        return 'templates';
      }

      function updateViewForEntropy(){
        const m = currentMode();
        render(m);
        updateStats();
      }

      // Stream logs into buffers and stage stream
      const streamLines = [];
      function pushLine(line){
        totalLines++;
        totalRawChars += line.length + 1;
        rawBuf.push(line);
        if (rawBuf.length>maxBuf) rawBuf.shift();
        const m = mask(line);
        maskedBuf.push(m);
        if (maskedBuf.length>maxBuf) maskedBuf.shift();
        const tpl = toTemplate(m);
        templateCounts.set(tpl, (templateCounts.get(tpl)||0) + 1);
        if (!tplFirstSeen.has(tpl)) tplFirstSeen.set(tpl, Date.now());
        // severity tally per template
        const sev = severityOf(line);
        const s = templateSeverity.get(tpl) || {}; s[sev] = (s[sev]||0) + 1; templateSeverity.set(tpl, s);
        if (!tplExample.has(tpl)) tplExample.set(tpl, line);
        // stream overlay buffer (keep ~100 lines)
        streamLines.push(line);
        while (streamLines.length>100) streamLines.shift();
        // trackers
        trackTemporal(tpl);
        trackSchemaMaybe(line);
      }

      function renderStream(){
        streamEl.textContent = streamLines.join('\n');
      }

      // Generator runs per frame; volume scales with entropy. UI throttled.
      // Prime data at load to avoid empty insights flicker
      (function primeData() {
        const now = Date.now();
        const windowSecs = 8;
        for (let s = windowSecs; s >= 1; s--) {
          const ts = now - s * 1000;
          const linesThisSec = (s === 2) ? 60 : 14; // induce one spike
          for (let i = 0; i < linesThisSec; i++) {
            pushLine(generateLine(), ts);
          }
        }
        renderStream();
        updateViewForEntropy();
      })();

      let genHandle; let lastUi = 0; const uiInterval = 33; // ~30 fps
      function startGen(){
        if (genHandle) cancelAnimationFrame(genHandle);
        function loop(now){
          const e = Number(getComputedStyle(root).getPropertyValue('--entropy')) || 0;
          // lines per frame ramp: ~2 → ~120 (3x boost)
          const lpf = Math.max(1, Math.round(2 + (e/100) ** 1.4 * 114));
          for (let i=0; i<lpf; i++) pushLine(generateLine());
          if (!lastUi || now - lastUi >= uiInterval) {
            renderStream();
            updateViewForEntropy();
            lastUi = now;
          }
          genHandle = requestAnimationFrame(loop);
        }
        genHandle = requestAnimationFrame(loop);
      }
      startGen();

      // Auto-reveal: animate entropy from noise→clear in ~2s (no page scroll)
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      function autoReveal(duration=2000){
        if (prefersReduced) { setEntropy(0); return; }
        let start = null;
        function step(ts){
          if (!start) start = ts;
          const p = Math.min(1, (ts - start) / duration);
          // ease: cubic-out
          const ease = 1 - Math.pow(1 - p, 3);
          const e = Math.round(100 * (1 - ease));
          setEntropy(e);
          if (p < 1) requestAnimationFrame(step);
          else { setEntropy(0); }
        }
        requestAnimationFrame(step);
      }
  autoReveal(2000);

  // Initial draw for demo UI
  updateViewForEntropy();

  // MCP integration note: add a lightweight hint section to the page footer
  (function addMcpSection(){
    try {
      const wrap = document.querySelector('.wrap');
      const section = document.createElement('section');
      section.className = 'hero-copy';
      section.style.marginTop = '1.4rem';
    } catch {}
  })();
    </script>
  </body>
</html>
